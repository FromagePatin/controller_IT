\section{Validation}

Cette partie vise à tester et valider le comportement des blocs fonctionnels.
Elle se positionne sur la pente remontante du cycle en V.

\subsection{Test unitaire}

\subsubsection{Solutionneur de priorités}
Le bloc solutionneur de priorités prend en entrée les 15 sources d'interruptions provenant des autres périphériques et le registre des priorités.
Il doit, à partir de cela, présenter en sortie le numéro de l'interruption active la plus prioritaire.
La gestion des interruptions n'étant pertinente, dans un processeur, que si la latence est réduite au minimum.
C'est pourquoi nous avons fait le choix de concevoir une solution asynchrone qui assure sa fonction en moins d'un cycle horloge.
La simulation suivante ne possède donc pas d'horloge.
Les deux conditions de priorité sont testées.
La première, si deux interruptions sont valides au même instant, c'est l'identifiant de la plus prioritaire au regard du registre \texttt{CTRL\_IT\_PRIO\_N} qui est placé en sortie.
La seconde, correspond au cas particulier où deux interruptions de même priorité seraient actives simultanément.
Dans cette situation, c'est l'identifiant le plus grand qui est sélectionné.
\begin{figure}[H]
    \centering
    \includegraphics[width=1.1\linewidth]{chrono_priority_solver.draw.png}
    \caption{Chronogramme validation solutionneur priorité}
    \label{fig:chrono_prio_solv}
\end{figure}
La figure \ref{fig:chrono_prio_solv} illustre le résultat du bloc solutionneur priorité lorsqu'il est soumis à une banc de test.
Bien que les simulies d'entrée prennent un grand nombre de valeurs dans la simulation originale, seul trois cas sont présentés.
Les priorités sont inchangées au cours de ce test et leur valeur sont $IT_4=6$, $IT_1=4$, $IT_2=4$.
Dans le premier, trois interruptions sont valides simultanément.
C'est l'identifiant 4 qui est placé en sortie, car sa priorité est de 6 contre 4 pour deux les autres.
Dans le deuxième cas, seul une interruption est valide, il n'y a pas d'arbitrage, la valeur 1 est visible en sortie.
Le dernier illustre la situation particulière où les 1 et 2 ont la même priorité.
C'est donc le numéro 2 qui prend la main.
Le chronogramme atteste du bon fonctionnement du bloc solutionneur de priorités.